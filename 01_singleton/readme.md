## 一、 单例模式
### 定义 

一个类只允许创建一个对象（或者叫实例）， 那这个类就是一个单例类，这种设计模式叫作单例设计模式， 简单单例模式

### 用处

从业务概念上，有些数据在系统中只应该保存一份，就比较适合设计为单例类

### 单例模式的唯一性

- 进程间唯一

- 如何实现线程间唯一

  在 golang 中无法使用, golang 主要主要使用协程，并且协程的id 没有暴露出来

- 如何实现集群环境之间的唯一？ （多进程）

  通过外部共享以存储的锁进行。例如文件

- 

### 如何实现：

- 构造函数是 private 访问权限 
- 考虑对象创建时的线程安全问题
- 考虑是否支持延迟加载
- 考虑 getInstance 的性能问题（是否有加锁等）

### 实现方式：

- **饿汉式**
  1. 类加载的时候 instance 实例已经创建好了
  2. Instance 的创建过程是线程安全的
  3. 不支持延迟加载
  4. 初始化时间可能会比较长
- **懒汉式**

  1. 在getInstance 的时候再去创建
  2. instance 创建过程需要加锁
  3. 支持延迟加载
  4. 不支持高并发
- 双重检测 
  1. 在懒汉模式，将方法的锁改成级别的锁
  2. 相对懒汉式的粒度更小，不会每次都去获取锁







